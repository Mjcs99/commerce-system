@page
@model Commerce.Web.Pages.Products.IndexModel

<h1>Products</h1>
<div style="opacity:.6">
    Query p=@Request.Query["p"] | Model CurrentPage=@Model.CurrentPage | TotalCount=@Model.TotalCount | TotalPages=@Model.TotalPages
</div>

<ul>
@foreach (var p in Model.Products)
{
    <li>@p.Name</li>
}
</ul>
<form method="get" class="mb-3">
    <input type="text"
           name="q"
           value="@Model.SearchTerm"
           placeholder="Search by name or SKU" />

    <button type="submit">Search</button>

    <a asp-page="./Index">Clear</a>
</form>

<nav>
    @if (Model.HasPrev)
    {
        <a asp-page="./Index"
           asp-route-p="@(Model.CurrentPage - 1)"
           asp-route-q="@Model.SearchTerm">
            Prev
        </a>
    }

    <span>Page @Model.CurrentPage of @Model.TotalPages</span>

    @if (Model.HasNext)
    {
        <a asp-page="./Index"
           asp-route-p="@(Model.CurrentPage + 1)"
           asp-route-q="@Model.SearchTerm">
            Next
        </a>
    }
</nav>

